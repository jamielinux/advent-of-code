- name: 'set_fact: input'
  ansible.builtin.set_fact:
    input: >-
      {{
        lookup('ansible.builtin.file', 'input.txt')
        | regex_replace('R', '- ')
        | regex_replace('L', '- -')
        | from_yaml
      }}

- name: 'set some facts'
  ansible.builtin.set_fact:
    position: 50
    solution: 0

- name: 'update position and solution'
  ansible.builtin.set_fact:
    position: '{{ (position + rotation) % 100 }}'
    solution: >-
      {{
        (solution + 1)
        if ((position + rotation) % 100 == 0)
        else solution
      }}
  loop: '{{ input }}'
  loop_control:
    label: '{{ idx }}'
    loop_var: rotation
    index_var: idx

- name: 'print solution'
  tags: [print_action]
  ansible.builtin.debug:
    msg: 'ðŸŽ„ SOLUTION ðŸŽ„: {{ solution }}'
